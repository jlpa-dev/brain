{
    "componentChunkName": "component---src-templates-article-js",
    "path": "/articles/007-terraform-101/",
    "result": {"data":{"site":{"siteMetadata":{"title":"JLPA | BLOG"}},"markdownRemark":{"id":"0af948fa-154f-5f99-a2ed-6186cdf99d82","excerpt":"Para la administración de recursos en la nube, solemos iniciar con arquitecturas pequeñas e ir agregando u ordenandonos en el camino.\nMientras mas grande se…","html":"<p>Para la administración de recursos en la nube, solemos iniciar con arquitecturas pequeñas e ir agregando u ordenandonos en el camino.\nMientras mas grande se vuelva la arquitectura, mas recursos debemos manejar y en algunos casos tendrmeos que soportar mas provvedores de nube.</p>\n<p>Para facilitar el manejo de infraestructura y obtener un mejor control de los estados e incluso incorporar procesos que permitan el manejo de infraestructura o de determinados reecursos se puede utilizar Terraform.</p>\n<p>Terraform nos ayudará con el manejo de nuestra infraestructura en la nube, como si de un proyecto de software se tratrará, escribiendo código y manifiestos.</p>\n<p>Abordaremos la creación de un proveedor y la realización de acciones de importación de infraestructura ya existente en el proveedor objetivo.</p>\n<h3>Instalando terraform cli</h3>\n<p>Puedes seguir el proceso de isntalación de Terraform CLI en la <a href=\"https://learn.hashicorp.com/tutorials/terraform/install-cli\">documentación oficial</a></p>\n<h3>Creando el proveedor</h3>\n<p>Crearemos la carpeta del proyecto \"iac\"</p>\n<pre><code class=\"language-sh\">$ mdkir iac\n$ cd iac\n</code></pre>\n<p>Creamos y escribimos el siguiente bloque de código en el archivo <strong>provider.tf</strong></p>\n<p>provider.tf</p>\n<pre><code class=\"language-go\">provider \"huaweicloud\" {\n\tregion = \"la-south-2\"\n\taccess_key = \"XXXX\"\n\tsecret_key = \"XXXXX\"\n}\n</code></pre>\n<p>En este caso el proveedor de nube pública es Huawei Cloud por lo tanto en nuestra definición especificaremos como provider \"huaweicloud\" tal y como está descrito en la documentación oficial de Terraform.</p>\n<h3>Iniciando terraform</h3>\n<p>Para que terrafrom descargue el proveedor especificado en provider.tf debemos inicializarlo con el siguiente comando.</p>\n<pre><code class=\"language-sh\">$ cd iac\n$ terraform init\n\nInitializing the backend...\n\nInitializing provider plugins...\n- Finding latest version of huaweicloud/huaweicloud\n- Installing huaweicloud/huaweicloud v1.20.0...\n...\nTerraform has been successfully initialized!\n</code></pre>\n<p>Una vez terminado el proceso, podremos empezar a escribir cpodigo para ser aplicado en nuestra infraestructura</p>\n<blockquote>\n<p>Si ya contamos con recursos creados en nuestra cuenta cloud, terraform no podrá gestionar estos recursos.\nPara poder controlar recursos ya existentes, debemos importarlos con <code>terrafrom import</code> o crearlos con <code>terraform apply</code>.\nSi realizamos la creación de recursos con <code>terrafrom apply</code> y existen recursos ya creados en nuestra cuenta cloud que no son manejados por terraform, no se realizará acción alguna con esos recursos, no se modificarán ni eliminarán.</p>\n</blockquote>\n<h3>Terraform plan</h3>\n<p>Es recomemdable siempre ejecutar <code>terrafrom plan</code> antes de aplicar los cambios hacia nuestra infraestructura con <code>terrafrom apply</code></p>\n<p><code>terraform plan</code> nos mostrará a detalle los cambios que se harán en nuestra infraestructura sin aplñicar los cambios.</p>\n<h3>Terraform apply</h3>\n<p>Una vez conozcamos los efectos de aplicar nuestra definicón de infraestructura utilizando <code>terrafrom plan</code> podemos realizar los cambios con <code>terrafrom apply</code> aú nasí se nos pedíra una confirmación para aceptar los cambios antes de ser aplicados.</p>\n<h3>Terraform import</h3>\n<p>Como ya se ha mencionado, existen recursos que probablemente ya existan o hallamos creados en uestra infraestructura y que deseamos agregar al control de terraform, para ello nos guiaremos de la <a href=\"https://registry.terraform.io/browse/providers\">documentación oficial</a> para conocer los tipos de recursos de nuestro proveedor.</p>\n<p>Para importar un recurso existente podemos utilizar <code>terraform import</code>. El nombre o ID del recursos lo podemos encontrar en la consola de administración denuestro proveedor de nube. En la mayoría de los casos se utiliza el ID del recurso, existen casos especificados en la documenatacoon que indican se especifique el nombre del recurso.</p>\n<pre><code class=\"language-sh\">terraform import tipo_recurso.nombre_recurso [ID_DE_RECURSO/NOMBRE_RECURSO]\n</code></pre>\n<p>Si queremos que terrafrom deje de tener el control de un recurso sin eliminarlo, podemos quitarlo con el siguiente comando.</p>\n<pre><code class=\"language-sh\">terraform state rm tipo_recurso.nombre_recurso\n</code></pre>\n<blockquote>\n<p>Para importar infraestructura existente también tenemos la opción de utilizar el proyecto<a href=\"https://github.com/GoogleCloudPlatform/terraformer\">Terraformer</a> el cual sería práctico en caso se desee importar gran cantidad de recursos.</p>\n</blockquote>","frontmatter":{"title":"Terraform - 101","date":"December 12, 2021","frontimage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#5848e8","images":{"fallback":{"src":"/brain/static/d9c8bc6de4480a4d10de4f1c43d7f243/74b84/frontimage.png","srcSet":"/brain/static/d9c8bc6de4480a4d10de4f1c43d7f243/9a9fc/frontimage.png 240w,\n/brain/static/d9c8bc6de4480a4d10de4f1c43d7f243/fd18e/frontimage.png 480w,\n/brain/static/d9c8bc6de4480a4d10de4f1c43d7f243/74b84/frontimage.png 960w","sizes":"(min-width: 960px) 960px, 100vw"},"sources":[{"srcSet":"/brain/static/d9c8bc6de4480a4d10de4f1c43d7f243/11908/frontimage.webp 240w,\n/brain/static/d9c8bc6de4480a4d10de4f1c43d7f243/ad76d/frontimage.webp 480w,\n/brain/static/d9c8bc6de4480a4d10de4f1c43d7f243/1ca0d/frontimage.webp 960w","type":"image/webp","sizes":"(min-width: 960px) 960px, 100vw"}]},"width":960,"height":300}}},"description":"Terraform - 101"},"fields":{"slug":"/007-terraform-101/"}},"previous":{"fields":{"slug":"/008-guardar-restaurar-dependencias-postgresql/"},"frontmatter":{"title":"Guardar/Restaurar dependencias PostgreSQL"}},"next":null},"pageContext":{"id":"0af948fa-154f-5f99-a2ed-6186cdf99d82","previousPostId":"5fe2a75d-0a58-5fc2-885b-ba9b41716ec3","nextPostId":null}},
    "staticQueryHashes": ["2841359383","3865664119"]}